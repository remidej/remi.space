import type { Metadata } from "next";
import { Inter } from "next/font/google";
import "./globals.css";
import { fetcher } from "@/utils/fetcher";
import Link from "next/link";

const inter = Inter({ subsets: ["latin"] });

export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default async function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const global = await fetcher("/api/global", {
    populate: ["navbarSocialNetworks"],
  });
  console.log(global);

  return (
    <html lang="en">
      <body
        style={inter.style}
        className="flex flex-col min-h-screen text-gray-800 dark:text-gray-100 bg-gray-100 dark:bg-gray-800"
      >
        {/* Top section */}
        <div className="flex-1">
          <nav className="container py-4 flex flex-row items-center justify-between text-gray-700 dark:text-gray-300">
            <Link
              href="/"
              className="inline-block font-bold text-xl hover:text-black dark:hover:text-white"
            >
              {global.data.attributes.siteName}
            </Link>
            <ul className="flex flex-row justify-end gap-2">
              {global.data.attributes.navbarSocialNetworks.data.map(
                (network) => (
                  <li key={network.id}>{network.attributes.name}</li>
                )
              )}
            </ul>
          </nav>
          {children}
        </div>
        <footer>footer</footer>
      </body>
    </html>
  );
}
